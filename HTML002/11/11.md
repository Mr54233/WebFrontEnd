# 11 WEBAPI 第四天

## 键盘事件

| 键盘事件   | 触发条件                                                           |
| ---------- | ------------------------------------------------------------------ |
| onkeyup    | 某个键盘按键被松开时触发                                           |
| onkeydown  | 某个键盘按键被按下时触发                                           |
| onkeypress | 某个键盘按键被按下时触发 , 但是它不识别功能键 比如 ctrl shift 箭头 |

注意:

1. 如果使用 addEventListener 不需要加 on
2. onkeypress 和前面两个的区别是 , 它不识别功能键 , 比如左右箭头 , shift 等
3. 三个事件的执行顺序是 , keydown -- keypress -- keyup

### 键盘事件对象

| 键盘事件对象属性 | 说明                |
| ---------------- | ------------------- |
| keyCode          | 返回该键的 ASCII 码 |

注意:

1. onkeydown 和 onkeyup 不区分大小写 , onkeypress 区分字母大小写
2. 在我们实际开发中 , 我们更多的使用 keydown 和 keyup , 它们能识别所有的键(包括功能键)
3. keypress 不识别功能键 , 但是 keyCode 属性能区分大小写 , 返回不同的 ASCII 码

## BOM 编程

### 什么是 BOM

Browser Object Model
即浏览器对象模型 , 它提供了独立于内容而与浏览器窗口进行交互的对象 , 其核心对象是 window, BOM 由一系列相关的对象构成 , 并且每个对象都提供了很多方法与属性
BOM 缺乏标准 , JavaScript 语法的标准化组织是 ECMA , DOM 的标准化阻止是 w3c , BOM 最初是 Netscape 浏览器标准的一部分

### BOM 的构成

BOM 比 DOM 更大 , 它包含 DOM
![]()

### DOM

-   文档对象模型
-   DOM 就是把[文档]当作一个[对象]来看待
-   DOM 的顶级对象是 document
-   DOM 主要学习的是操作页面元素
-   DOM 是 w3c 标准规范

### BOM

-   浏览器对象模型
-   把[浏览器]当作一个[对象]来看待
-   BOM 的顶级元素是 window
-   BOM 学习的是浏览器窗口交互的一些对象
-   BOM 是浏览器厂商在各自浏览器上定义的 , 兼容性较差

### 顶层对象 window

window 对象是浏览器的顶级对象 , 它具有双重角色

1. 它是 js 访问浏览器窗口的一个接口
2. 它是一个全局对象. 定义在全局作用域中的变量 , 函数都会变成 window 对象的属性和方法

在调用的时候可以省略 window , 前面学习的对话框都属于 window 对象方法 , 如 alert() , prompt()等
注意 : window 下一个的特殊属性 window.name

### window 对象的常见事件

页面(窗口)加载事件(2 种)

#### window.onload 是窗口(页面)加载事件
当文档内容完全加载完成 会触发该事件(包括图像 , 脚本文件 , css 文件等) , 就调用的处理函数

```js
window.onload = function(){};
window.addEventListener('load' , function(){});
```
注意 : 
1. 有了window.onload , 就可以把JS代码写在网页元素的上方
2. window.onload 只能绑定一个事件处理函数 , 如果绑定多个 , 只有最后一个起作用 ;
3. addEventListener 没有上述第二点限制

#### DOMContentLoaded事件
DOMContentLoaded 事件触发时 , 仅当DOM加载完成 , 不包括样式表 , 图片 , flash等等 , IE9以上才支持
如果页面的图片很多的话 , 从用户访问到onload触发可能需要较长的时间 , 交互效果就不能实现 , 必然影响用户的体验 , 此时用DOMContentLoaded事件比较合适.
```js
window.addEventListener(
    'DOMContentLoaded' , function(){};
)
```
#### 调整窗口大小事件
```js
window.onresize = function(){};
window.addEventListener('resize',function(){});
```
window.onresize是调整窗口大小加载事件 , 当触发时就能调用的处理函数.
注意:
1. 只要窗口大小发生像素变化, 就会触发这个事件
2. 我们经常利用这个时间完成响应式布局 . 
window.innerWidth当前屏幕宽度

#### 定时器
window对象给我们提供了两个非常好用的方法 - 定时器
- setTimeout()
- setInterval()

##### setTimeout()炸弹定时器
window.setTimeout(回调函数 , 延迟时间);
注意:
1. window可以省略
2. 回调函数可以是直接书写函数或者函数名
3. 延迟时间单位是毫秒 , 默认值为0
4. 因为定时器很多 , 所以经常将定时器函数返回的定时器对象赋值给一个标识符

##### 停止定时器
window.clearTimeout(timeoutid);
clearTimeout()方法取消了通过setTimeout()开启的定时器
注意:
1. window对象名可以省略;
2. 参数就是定时器对象的标识符
##### setInterval()闹钟定时器
window.setInterval(回调函数 , 时间间隔)
setInterval()方法开启闹钟定时器 , 每隔一段事件 , 就调用一次回调函数

### window对象常用的方法
- 对话框方法 :
    - `alert()` : 警告对话框
    - `prompt()` : 输入对话框
    - `confirm()`: 确认对话框
- 数据类型转换 :
    - `parseInt()` : 转换为整型
    - `parseFloat()` : 转换为小数


## JS执行流程


