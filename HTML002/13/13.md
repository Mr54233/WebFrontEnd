# 13 WebApi第五天
## 动画函数封装
### 缓动效果原理
缓动动画就是让元素运动速度有所变化 , 最常见的是让速度慢慢停下来
思路:
**步长: 每次的增量 和 运动速度有关**
1. 让盒子每次移动的距离慢慢变小 , 速度就会慢慢落下来
2. 核心算法 , (目标值 - 现在的位置) / 10 做为每次移动的距离补偿
3. 停止的条件是 : 让当前盒子位置等于目标位置就停止定时器
4. >注意步长值需要取整

### 动画函数多个目标值之间移动
可以让动画函数从800移动到500
当我们点击按钮时候 , 判断步长是正值还是负值
1. 如果是正值 , 则步长往大了取整
2. 如果是负值 , 则步长往小了取整

### 动函数添加回调函数 
回调函数原理：函数可以作为一个参数。将这个函数作为参数传到另一个函数里面，当那个函数执行完之后，再执行传进去的这个函数，这个过程就叫做回调。
回调函数写的位置：定时器结束的位置。 


## 节流阀
防止轮播图按钮连续点击造成播放过快
节流阀的目的 : 当上一个函数动画内容执行完毕 , 再去执行下一个函数动画 , 让事件无法连续触发.
核心实现思路: 利用回调函数 , 添加一个变量来控制 , 锁住函数和解锁函数.
```js
//开始设置一个变量
var flag = true;
if(flag){
    flag = false;
    do something
} // 关闭节流阀
//利用回调函数动画执行完毕 , flag = true 
// 打开节流阀
```

## 表单验证
### 表单验证的概述
表单验证就是验证用户在表单中填写的数据是否合法 , 比如 , 用户账户必须填写 , 密码至少6位 , 确认密码和密码必须一致 , 有效的电子邮箱等 .
也可以称之为**数据有效性验证** .
数据有效性验证也可以在服务器端完成 , 但是会造成: 

1. 服务器负载过大 
2. 用户的体验不好

所以一般需要在客户端使用js代码进行表单验证.
### 表单验证的要点
要点就是什么时间用什么技术进行表单验证 , 或者说什么事件发生后使用什么技术进行表单验证
### 和表单验证相关的事件
- `onsubmit` : 表单的 , 单击提交按钮后 , 准备提交但是没有提交时触发
- `onblur` : 表单元素失去元素 , 代表该表单元素的数据填写完毕
### 和表单验证相关的技术
- 字符串内置对象的方法
- **正则表达式**

## 正则表达式
### 创建正则表达式对象:
```js
var 对象名 = new RegExp('正则表达式内容' , ' 附加参数 ');
var 对象名 = /正则表达式内容/附加参数;
```
### 验证方法
对象名.test(数据) : true 数据满足正则表达式 ; false 不满足

### 正则表达式写法
#### 代表字符的通配符
```
\w \W \d \D \s \S [字符列表] [^字符列表]
word digit space
```
#### 代表出现次数的表达式
```
{n} {n,} {n,m} 
+ ?
```

## 正则表达式

+:表示至少一位 相当于{1,}
\*:相当于{0,}

固话 : `/^0[1-9]\d{1,2}-\d{7,8}$/`

手机号码 : `/^1[3-9]\d{9}$/`

电子邮箱 :`/\w+([-+.]\w)*@\w+([-.]\w+)*\.\w+([-.]\w+)*`

## 通用表单验证的框架

1. 验证的类型是有限的 : 必填 , 最小长度 , 最大长度 , 最大值 , 最小值 , 两个表单元素中的值一致 , 固定格式
2. 自定义属性: `data-req = 'true'` `data-min-len = '6'` `data-max-len = '15'` `data-min-val = '7'` `data-max-val = '18'` `data-same = 'id'` `data-format = 'email'` `data-err-msg = ''` `data-suc-msg = ''`
3. JS 代码 : 查询到网页中所有的表单元素 , 遍历所有的表单元素:检查有没有对应的自定义属性

## 触屏事件概述

移动端浏览器兼容性较好，我们不需要考虑以前 JS 的兼容性问题，可以放心的使用原生 JS 书写效果，但是移动端也有自己独特的地方。比如触屏事件 touch（也称触摸事件），Android 和 IOS 都有。
touch 对象代表一个触摸点。触摸点可能是一根手指，也可能是一根触摸笔。触屏事件可响应用户手指（或触控笔）对屏幕或者触控板操作。
常见的触屏事件如下：
|触屏 touch 事件 | 说明|
|-|-|
|`touchstart`|手指触摸到一个 DOM 元素时触发|
|`touchmove`|手指在一个 DOM 元素上滑动时触发|
|`touchend`|手指在一个 DOM 元素上移开时触发|

## 触摸事件对象（TouchEvent）

`TouchEvent`  是一类描述手指在触摸平面（触摸屏、触摸板等）的状态变化的事件。这类事件用于描述一个或多个触点，使开发者可以检测触点的移动，触点的增加和减少，等等
`touchstart`、`touchmove`、`touchend` 三个事件都会各自有事件对象。
触摸事件对象重点我们看三个常见对象列表：

| 触屏列表 | 说明                   |
| -------- | ---------------------- |
| touches  | 正在触摸屏幕的手指列表 |
