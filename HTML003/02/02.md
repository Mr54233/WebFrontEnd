# http 协议

![](../img/request%20response.png)

工具 : 抓包工具 , fiddler

-   请求一个网页 , 如果网页中引用了外部的 css 文件 , js 文件 和 图片文件, 那么浏览器在人工请求该网页后 , 会自动的单独请求 css 文件 , js 文件 和 图像文件
    -   onload ,
        -   所有下载完成 , 才发生
    -   onDOMContentLoad
        -   html 下载完就发生

数据包 , 又称之为报文 , 报文头(报文属性 : 属性值) , 报文主体(报文的具体内容)

`GET http://localhost:3000/index.html HTTP/1.1 `
请求方式 , 请求地址 协议/版本号

-   常见响应代码

    -   200 : 成功
    -   302 : 重定向
    -   304 : 打开缓存中原来请求的结果
    -   404 : 没找到请求的资源
    -   500 : 服务器应用程序出错了

-   Content-Type : 内容类型
    -   text/html : 网页
    -   text/css : css 样式
    -   application/JavaScript : js 代码
    -   image/jpeg : 图像

# 模块化的基本概念

## 什么是模块化

模块化是指解决一个复杂问题时 , 自顶向下逐层把系统划分成若干模块的过程 , 对于整个系统来说 , 模块是可组合、分解和更换的单元.

编程领域中的模块化 , 就是遵守固定的规则 , 把一个大文件拆成独立并相互依赖的多个小模块

把代码进行模块化拆分的好处:

1. 提高了代码的复用性
2. 提高了代码的可维护性
3. 可以实现按需加载

## 模块化规范

模块化规范就是对模块进行模块化的拆分与组合时 , 需要遵守的那些规则

例如:

-   使用什么样的语法格式来应用模块
-   在模块中使用什么样的语法格式向外暴露成员

> 模块化规范的好处 : 大家都遵守同样的模块化规范写代码 , 降低了沟通的成本 , 极大方便了各个模块之间的相互调用, 利人利己.

# Node.js 中的模块化

## Node.js 中模块的分类

Node.js 中根据模块来源的不同 , 将模块分为三大类 , 分别为:

-   内置模块 (内置模块是由 Nodejs 官方提供的 , 例如 fs , path , http 等)
-   自定义模块 (用户创建的每个 .js 文件, 都是自定义模块)
-   第三方模块(由第三方开发出来的模块 , 并非官方的内置模块 , 也不是由用户创建的自定义模块 , 使用前需要先下载)

## 加载模块

使用强大的 require() 方法 , 可以加载需要的内置模块 , 用户自定义模块 , 第三方模块 进行使用 , 例如

```js
// 加载内置的fs 模块
const fs = require("fs");

// 加载用户的自定义模块
const custom = require("./custom.js");

// 加载第三方模块(关于第三方模块的下载和使用 , 会在后面的课程中进行专门的讲解)
const moment = require("moment");
```

> 注意 : 使用 require() 方法加载其他模块时 , 会执行被加载模块中的代码

## Nodejs 中的模块作用域

### 什么是模块作用域

和函数作用域类似 , 在自定义模块中定义的变量 , 方法 等成员 , 只能在当前模块内被访问 , 这种模块级别的访问限制 , 叫做模块作用域

### 模块作用域的好处

防止了全局变量污染的问题

#### 全局变量污染

```js
01.js : var x = 1;
02.js : var x = 100;
src='./01.js'
src='./02.js'
console.log(x)
```

## module 对象
在每个.js 自定义模块中都有一个module
对象 , 它里面存储了和当前模块有关的信息 , 打印如下

![](../img/module.png)

使用require() 方法导入模块的时候 , 导入的结果 , **永远以module.exports 指向的对象为准**
如果module.exports 和 exports 导出的属性和方法同名 , 那就以module.exports 为准
如果属性和方法不相同 , 合并两种暴露为一个对象并导出

### exports 对象
由于module.exports单词写起来比较复杂 , 为了简化向外共享

### exports 和 module.exports 的使用误区

## CommonJS模范规范

# npm 和包
## 什么是包
Node.js 中的第三方模块又叫做包
就像电脑和计算机指的是相同的东西 , 第三方模块和包指的是同一个概念 , 只不过叫法不同
### 包的来源
不同于nodejs中的内置模块和自定义模块 , 包是由第三方
### 为什么需要包
由于Nodejs 的内置模块

# 模块的加载机制
